\subsubsection{Saving Images}
\label{subsubsec:saving_images}

Listing \ref{lst:saving_images} shows the implementation of the image saving.
The required color space transformation is done with the OpenCV function \texttt{cv::cvtColor} for each valid frame individually (see line~\ref{lst:ln:color_transformation}).
Since the Baumer \texttt{BayerRG} pixel format is used, the required color space conversion code is \texttt{cv::COLOR\_BayerBG2BGR} (see section \ref{subsubsec:pixel_format}).
Afterwards, the OpenCV function \texttt{cv::imwrite} is used to save the image to the specified directory \texttt{output\_path} (see line~\ref{lst:ln:image_saving}).
The images are named in numerical order, starting at zero.
This results in the image file names `\texttt{$\{0..(N-1)\}$.png}' (with $N$ beeing the amount of valid frames) \cite{baumer_opencv}.

\vspace{5pt}
\begin{lstlisting}[style=C++, caption={Saving the images}, label=lst:saving_images]
  for (int i = throw_bgn_idx; i < (throw_end_idx - 1); ++i) {
    cv::cvtColor(cv_buffer[i % buff_size], cv_transformed, cv::COLOR_BayerBG2BGR);(*\label{lst:ln:color_transformation}*)
    cv::imwrite(output_path + std::to_string(i - throw_bgn_idx) + ".png", cv_transformed);(*\label{lst:ln:image_saving}*)
  }
\end{lstlisting}

The images are saved in the Portable Network Graphics (PNG) file format.
The advante over bitmap (BMP) and Joint Photographic Experts Group (JPEG) images is the lossless compression.
PNG images require less space than BMP images and offer better quality than the lossy JPEG images.
If needed, PNG images can always be converted to BMP images and vice versa \cite{image_formats}.
